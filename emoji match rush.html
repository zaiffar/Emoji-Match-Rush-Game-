<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Match Rush - Fun Matching Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        /* Animated Background */
        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }

        .emoji-bg {
            position: absolute;
            font-size: 2rem;
            animation: float 6s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Home Section */
        .home-section {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .home-title {
            font-size: 3.5rem;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            background: linear-gradient(45deg, #FFD700, #FF6B6B, #4ECDC4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .home-subtitle {
            font-size: 1.3rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .featured-emojis {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .emoji-large {
            font-size: 4rem;
            animation: bounce 2s infinite;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .emoji-large:hover {
            transform: scale(1.2);
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Category Section */
        .category-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .category-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .category-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .category-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #FFD700;
        }

        .category-desc {
            opacity: 0.9;
            margin-bottom: 15px;
        }

        /* Game Section */
        .game-section {
            display: none;
            max-width: 500px;
            margin: 0 auto;
            text-align: center;
        }

        .header {
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .info-box {
            text-align: center;
        }

        .info-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .info-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .card {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            transform-style: preserve-3d;
        }

        .card:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .card.matched {
            background: rgba(46, 204, 113, 0.5);
            cursor: default;
        }

        .card.flipped {
            background: white;
            color: #333;
            transform: rotateY(180deg);
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 12px 20px;
            border: none;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            backdrop-filter: blur(5px);
        }

        button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        button.primary {
            background: #e74c3c;
            font-weight: bold;
        }

        button.primary:hover {
            background: #c0392b;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        button:disabled:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: none;
        }

        .back-btn {
            background: #3498db;
            margin-bottom: 20px;
            width: 100%;
        }

        .back-btn:hover {
            background: #2980b9;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .modal h2 {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .modal p {
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .ad-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px dashed rgba(255, 255, 255, 0.3);
        }

        .ad-simulation {
            background: white;
            color: #333;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .ad-timer {
            font-size: 1.2rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .share-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            padding: 10px;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .share-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: left;
        }

        .instructions h3 {
            margin-bottom: 10px;
            text-align: center;
        }

        .instructions ul {
            list-style-position: inside;
            margin-left: 10px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        @media (max-width: 500px) {
            .game-board {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }
            
            .card {
                font-size: 1.5rem;
            }
            
            .home-title {
                font-size: 2.5rem;
            }
            
            .category-section {
                grid-template-columns: 1fr;
            }
        }

        /* Animation for matched cards */
        @keyframes matchedAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .matched {
            animation: matchedAnimation 0.5s ease;
        }

        /* Progress bar */
        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: #e74c3c;
            width: 100%;
            transition: width 1s linear;
        }

        .hint-ad-modal {
            background: rgba(52, 152, 219, 0.95);
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="background-animation" id="backgroundAnimation"></div>

    <div class="container">
        <!-- Home Section -->
        <div class="home-section" id="homeSection">
            <h1 class="home-title">ğŸ® Emoji Match Rush ğŸ®</h1>
            <p class="home-subtitle">Match the emojis, beat the clock, and have fun!</p>
            
            <div class="featured-emojis">
                <div class="emoji-large">ğŸš—</div>
                <div class="emoji-large">ğŸ </div>
                <div class="emoji-large">ğŸ®</div>
                <div class="emoji-large">ğŸŒŸ</div>
                <div class="emoji-large">ğŸ¯</div>
            </div>

            <div class="category-section">
                <div class="category-card" onclick="selectCategory('matching')">
                    <div class="category-icon">ğŸ­</div>
                    <h3 class="category-title">Matching Emojis</h3>
                    <p class="category-desc">Classic matching game with similar emoji pairs</p>
                    <button class="primary">Play Now</button>
                </div>
                
                <div class="category-card" onclick="selectCategory('all')">
                    <div class="category-icon">ğŸŒˆ</div>
                    <h3 class="category-title">All Emojis Mix</h3>
                    <p class="category-desc">Mix of all emojis including cars, homes, and more!</p>
                    <button class="primary">Play Now</button>
                </div>
                
                <div class="category-card" onclick="selectCategory('cars')">
                    <div class="category-icon">ğŸš—</div>
                    <h3 class="category-title">Car Emojis</h3>
                    <p class="category-desc">Only vehicle and transportation emojis</p>
                    <button class="primary">Play Now</button>
                </div>
            </div>
        </div>

        <!-- Game Section -->
        <div class="game-section" id="gameSection">
            <button class="back-btn" onclick="showHomeSection()">â† Back to Home</button>
            
            <div class="header">
                <h1 id="gameTitle">ğŸ® Emoji Match Rush ğŸ®</h1>
                <p id="gameSubtitle">Find matching emoji pairs before time runs out!</p>
            </div>

            <div class="game-info">
                <div class="info-box">
                    <div class="info-label">Time Left</div>
                    <div class="info-value" id="timer">60</div>
                </div>
                <div class="info-box">
                    <div class="info-label">Level</div>
                    <div class="info-value" id="level">1</div>
                </div>
                <div class="info-box">
                    <div class="info-label">Score</div>
                    <div class="info-value" id="score">0</div>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>

            <div class="game-board" id="gameBoard">
                <!-- Cards will be generated here by JavaScript -->
            </div>

            <div class="controls">
                <button id="restartBtn">ğŸ”„ Restart</button>
                <button id="hintBtn" disabled>ğŸ’¡ Watch Ad for Hint</button>
                <button class="primary" id="startBtn">ğŸš€ Start Game</button>
            </div>

            <div class="instructions">
                <h3>How to Play</h3>
                <ul>
                    <li>Click on cards to flip them and find matching emoji pairs</li>
                    <li>Complete all pairs before time runs out</li>
                    <li>Each level gets faster with more cards</li>
                    <li>Watch ads to get hints when you're stuck</li>
                    <li>Share your high score with friends!</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div class="modal" id="gameOverModal">
        <div class="modal-content">
            <h2>Game Over! ğŸ¯</h2>
            <p>Your final score: <span id="finalScore">0</span></p>
            <p>Level reached: <span id="finalLevel">1</span></p>
            <button class="primary" id="playAgainBtn">Play Again</button>
            
            <div class="share-buttons">
                <div class="share-btn" id="shareTwitter">
                    ğŸ¦ Share on Twitter
                </div>
                <div class="share-btn" id="shareWhatsApp">
                    ğŸ’¬ Share on WhatsApp
                </div>
            </div>
        </div>
    </div>

    <!-- Level Complete Modal -->
    <div class="modal" id="levelCompleteModal">
        <div class="modal-content">
            <h2>Level Complete! ğŸ‰</h2>
            <p>Get ready for the next level!</p>
            <p>More cards, less time!</p>
            <button class="primary" id="nextLevelBtn">Next Level</button>
        </div>
    </div>

    <!-- Hint Ad Modal -->
    <div class="modal hint-ad-modal" id="hintAdModal">
        <div class="modal-content">
            <h2>Get a Hint! ğŸ’¡</h2>
            <p>Watch a short ad to reveal a matching pair</p>
            
            <div class="ad-container">
                <div class="ad-simulation">
                    <h3>ğŸ“± Advertisement</h3>
                    <p>This is where your ad would play</p>
                    <div class="ad-timer" id="adTimer">5</div>
                    <p>Waiting for ad to complete...</p>
                </div>
            </div>
            
            <button class="primary" id="watchAdBtn">Watch Ad for Hint</button>
            <button id="cancelAdBtn">Cancel</button>
        </div>
    </div>

    <script>
        // Game variables
        let cards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let totalPairs = 8;
        let timer;
        let timeLeft = 60;
        let score = 0;
        let level = 1;
        let gameStarted = false;
        let adTimer;
        let adTimeLeft = 5;
        let currentCategory = 'matching';

        // Emoji categories
        const emojiCategories = {
            'matching': ['ğŸ˜€', 'ğŸ®', 'ğŸš€', 'ğŸŒŸ', 'ğŸ¯', 'ğŸ†', 'â¤ï¸', 'â­', 'ğŸ¨', 'ğŸµ'],
            'all': ['ğŸ˜€', 'ğŸš—', 'ğŸ ', 'ğŸ®', 'ğŸŒŸ', 'ğŸ¯', 'ğŸ†', 'â¤ï¸', 'â­', 'ğŸ¨', 'ğŸµ', 'ğŸ”¥', 'ğŸ’', 'ğŸ‘‘', 'ğŸ’¡', 'ğŸ', 'ğŸ“±', 'âœˆï¸', 'ğŸš‚', 'ğŸš²'],
            'cars': ['ğŸš—', 'ğŸš™', 'ğŸš', 'ğŸš›', 'ğŸš’', 'ğŸï¸', 'ğŸš“', 'ğŸš‘', 'ğŸšœ', 'ğŸš', 'ğŸšŒ', 'ğŸš•', 'ğŸš„', 'âœˆï¸', 'ğŸš€', 'ğŸš', 'ğŸš¤', 'â›µ', 'ğŸš²', 'ğŸ›µ']
        };

        // DOM elements
        const homeSection = document.getElementById('homeSection');
        const gameSection = document.getElementById('gameSection');
        const gameTitle = document.getElementById('gameTitle');
        const gameSubtitle = document.getElementById('gameSubtitle');
        const gameBoard = document.getElementById('gameBoard');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('score');
        const levelDisplay = document.getElementById('level');
        const progressBar = document.getElementById('progress');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');
        const hintBtn = document.getElementById('hintBtn');
        const gameOverModal = document.getElementById('gameOverModal');
        const levelCompleteModal = document.getElementById('levelCompleteModal');
        const hintAdModal = document.getElementById('hintAdModal');
        const finalScore = document.getElementById('finalScore');
        const finalLevel = document.getElementById('finalLevel');
        const playAgainBtn = document.getElementById('playAgainBtn');
        const nextLevelBtn = document.getElementById('nextLevelBtn');
        const watchAdBtn = document.getElementById('watchAdBtn');
        const cancelAdBtn = document.getElementById('cancelAdBtn');
        const adTimerDisplay = document.getElementById('adTimer');
        const shareTwitter = document.getElementById('shareTwitter');
        const shareWhatsApp = document.getElementById('shareWhatsApp');
        const backgroundAnimation = document.getElementById('backgroundAnimation');

        // Create animated background
        function createBackground() {
            const emojis = ['ğŸš—', 'ğŸ ', 'ğŸ®', 'ğŸŒŸ', 'ğŸ¯', 'â¤ï¸', 'â­', 'ğŸ¨', 'ğŸµ', 'ğŸ”¥', 'ğŸ’', 'ğŸ‘‘'];
            for (let i = 0; i < 20; i++) {
                const emoji = document.createElement('div');
                emoji.className = 'emoji-bg';
                emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                emoji.style.left = Math.random() * 100 + 'vw';
                emoji.style.top = Math.random() * 100 + 'vh';
                emoji.style.animationDelay = Math.random() * 5 + 's';
                emoji.style.fontSize = (Math.random() * 2 + 1) + 'rem';
                backgroundAnimation.appendChild(emoji);
            }
        }

        // Show home section
        function showHomeSection() {
            homeSection.style.display = 'block';
            gameSection.style.display = 'none';
            clearInterval(timer);
            gameStarted = false;
        }

        // Select category and start game
        function selectCategory(category) {
            currentCategory = category;
            homeSection.style.display = 'none';
            gameSection.style.display = 'block';
            
            // Update game title based on category
            const categoryTitles = {
                'matching': 'ğŸ­ Matching Emojis',
                'all': 'ğŸŒˆ All Emojis Mix', 
                'cars': 'ğŸš— Car Emojis'
            };
            
            const categoryDescriptions = {
                'matching': 'Match similar emoji pairs before time runs out!',
                'all': 'Find matching pairs from all emoji categories!', 
                'cars': 'Match vehicle and transportation emojis!'
            };
            
            gameTitle.textContent = categoryTitles[category] + ' Game';
            gameSubtitle.textContent = categoryDescriptions[category];
            
            initGame();
        }

        // Initialize game
        function initGame() {
            // Reset game state
            cards = [];
            flippedCards = [];
            matchedPairs = 0;
            gameStarted = false;
            
            // Set level-specific values
            if (level === 1) {
                totalPairs = 8;
                timeLeft = 60;
            } else if (level === 2) {
                totalPairs = 10;
                timeLeft = 75;
            } else if (level === 3) {
                totalPairs = 12;
                timeLeft = 90;
            } else {
                totalPairs = 8 + level * 2;
                timeLeft = 60 + level * 5;
            }
            
            // Update displays
            timerDisplay.textContent = timeLeft;
            scoreDisplay.textContent = score;
            levelDisplay.textContent = level;
            hintBtn.disabled = true;
            hintBtn.textContent = 'ğŸ’¡ Watch Ad for Hint';
            startBtn.disabled = false;
            startBtn.textContent = 'ğŸš€ Start Game';
            
            // Clear the game board
            gameBoard.innerHTML = '';
            
            // Get emojis for current category
            const categoryEmojis = emojiCategories[currentCategory];
            let emojiSet = categoryEmojis.slice(0, totalPairs);
            let cardValues = [...emojiSet, ...emojiSet];
            
            // Shuffle cards
            cardValues = shuffleArray(cardValues);
            
            // Create card elements
            cardValues.forEach((value, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.index = index;
                card.dataset.value = value;
                card.textContent = '?';
                card.addEventListener('click', () => flipCard(card));
                gameBoard.appendChild(card);
                cards.push(card);
            });
            
            // Set grid layout based on number of cards
            const gridSize = Math.sqrt(cards.length);
            gameBoard.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
            
            // Reset progress bar
            progressBar.style.width = '100%';
        }

        // Shuffle array function
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Flip card function
        function flipCard(card) {
            if (!gameStarted || flippedCards.length >= 2 || card.classList.contains('flipped') || card.classList.contains('matched')) {
                return;
            }
            
            card.textContent = card.dataset.value;
            card.classList.add('flipped');
            flippedCards.push(card);
            
            if (flippedCards.length === 2) {
                checkForMatch();
            }
        }

        // Check for matching cards
        function checkForMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.dataset.value === card2.dataset.value) {
                // Match found
                card1.classList.add('matched');
                card2.classList.add('matched');
                matchedPairs++;
                
                // Add to score
                score += 10 * level;
                scoreDisplay.textContent = score;
                
                // Check if level is complete
                if (matchedPairs === totalPairs) {
                    levelComplete();
                }
                
                flippedCards = [];
            } else {
                // No match
                setTimeout(() => {
                    card1.textContent = '?';
                    card2.textContent = '?';
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    flippedCards = [];
                }, 1000);
            }
        }

        // Start game timer function
        function startGameTimer() {
            if (gameStarted) return;
            
            gameStarted = true;
            startBtn.disabled = true;
            startBtn.textContent = 'Game Running...';
            hintBtn.disabled = false;
            
            // Start timer
            timer = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                
                // Update progress bar
                const totalTime = level === 1 ? 60 : level === 2 ? 75 : 90;
                const progressPercent = (timeLeft / totalTime) * 100;
                progressBar.style.width = `${progressPercent}%`;
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        // Level complete function
        function levelComplete() {
            clearInterval(timer);
            
            // Bonus points for time left
            score += timeLeft * level;
            scoreDisplay.textContent = score;
            
            // Show level complete modal
            setTimeout(() => {
                levelCompleteModal.style.display = 'flex';
            }, 1000);
        }

        // End game function
        function endGame() {
            clearInterval(timer);
            gameStarted = false;
            hintBtn.disabled = true;
            
            // Show game over modal
            finalScore.textContent = score;
            finalLevel.textContent = level;
            gameOverModal.style.display = 'flex';
        }

        // Show ad for hint
        function showAdForHint() {
            if (!gameStarted) return;
            
            hintAdModal.style.display = 'flex';
            adTimeLeft = 5;
            adTimerDisplay.textContent = adTimeLeft;
            
            // Simulate ad countdown
            adTimer = setInterval(() => {
                adTimeLeft--;
                adTimerDisplay.textContent = adTimeLeft;
                
                if (adTimeLeft <= 0) {
                    clearInterval(adTimer);
                    giveHint();
                    hintAdModal.style.display = 'none';
                }
            }, 1000);
        }

        // Give hint after ad
        function giveHint() {
            // Find unmatched cards
            const unmatchedCards = cards.filter(card => 
                !card.classList.contains('matched') && 
                !card.classList.contains('flipped')
            );
            
            if (unmatchedCards.length >= 2) {
                // Find a pair to reveal
                const values = {};
                let hintCard1, hintCard2;
                
                for (const card of unmatchedCards) {
                    if (values[card.dataset.value]) {
                        hintCard1 = values[card.dataset.value];
                        hintCard2 = card;
                        break;
                    } else {
                        values[card.dataset.value] = card;
                    }
                }
                
                if (hintCard1 && hintCard2) {
                    // Briefly show the hint cards
                    hintCard1.textContent = hintCard1.dataset.value;
                    hintCard2.textContent = hintCard2.dataset.value;
                    hintCard1.classList.add('flipped');
                    hintCard2.classList.add('flipped');
                    
                    setTimeout(() => {
                        hintCard1.textContent = '?';
                        hintCard2.textContent = '?';
                        hintCard1.classList.remove('flipped');
                        hintCard2.classList.remove('flipped');
                    }, 2000);
                }
            }
        }

        // Cancel ad
        function cancelAd() {
            clearInterval(adTimer);
            hintAdModal.style.display = 'none';
        }

        // Next level function
        function nextLevel() {
            level++;
            levelCompleteModal.style.display = 'none';
            initGame();
            startGameTimer();
        }

        // Share functions
        function shareOnTwitter() {
            const text = `I scored ${score} points on Level ${level} in Emoji Match Rush! Can you beat me?`;
            const url = window.location.href;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        }

        function shareOnWhatsApp() {
            const text = `I scored ${score} points on Level ${level} in Emoji Match Rush! Can you beat me? Play here: ${window.location.href}`;
            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
        }

        // Event listeners
        startBtn.addEventListener('click', startGameTimer);

        restartBtn.addEventListener('click', () => {
            clearInterval(timer);
            score = 0;
            level = 1;
            initGame();
        });

        hintBtn.addEventListener('click', showAdForHint);

        watchAdBtn.addEventListener('click', () => {
            // Reset timer to show immediate countdown
            clearInterval(adTimer);
            adTimeLeft = 5;
            adTimerDisplay.textContent = adTimeLeft;
            
            adTimer = setInterval(() => {
                adTimeLeft--;
                adTimerDisplay.textContent = adTimeLeft;
                
                if (adTimeLeft <= 0) {
                    clearInterval(adTimer);
                    giveHint();
                    hintAdModal.style.display = 'none';
                }
            }, 1000);
        });

        cancelAdBtn.addEventListener('click', cancelAd);

        playAgainBtn.addEventListener('click', () => {
            gameOverModal.style.display = 'none';
            score = 0;
            level = 1;
            initGame();
        });

        nextLevelBtn.addEventListener('click', nextLevel);

        shareTwitter.addEventListener('click', shareOnTwitter);
        shareWhatsApp.addEventListener('click', shareOnWhatsApp);

        // Initialize the game on load
        window.addEventListener('load', () => {
            createBackground();
            showHomeSection();
        });
    </script>
</body>
</html>